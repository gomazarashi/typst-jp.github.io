

<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">
  <title>Plugin – Typstドキュメント日本語版</title>
  <meta name="description" content="Documentation for the `plugin` function.">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#239dad">
  <meta property="og:url" content="https://typst-jp.github.io/docs/reference/foundations/plugin/">
  <meta property="og:title" content="Plugin – Typstドキュメント日本語版">
  <meta property="og:site_name" content="Typst">
  <meta property="og:description" content="Documentation for the `plugin` function.">
  <meta property="og:type">
  <meta property="og:image" content="https://typst-jp.github.io/assets/social.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:site" content="@typstapp">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://typst-jp.github.io/docs/reference/foundations/plugin/">
  <meta name="twitter:image:alt"
    content="The left side of a text editor with colorful cursors, as well as the text &#x27;Compose papers faster, Typst&#x27;">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon.ico">
  <!-- <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon.ico"> -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
  <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#239dad">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="stylesheet" href="/styles/default.css?bust=20230913?d=2023-09-16">
  <link rel="stylesheet" href="/styles/docs.css?bust=20230915?d=2023-09-16">
  <link rel="stylesheet" href="/styles/custom.css">
  <link rel="preload" href="/assets/fonts/HKGrotesk-Regular.woff2" as="font">
  <link rel="preload" href="/assets/fonts/HKGrotesk-Bold.woff2" as="font">
  <link rel="preload" href="/assets/fonts/HKGrotesk-SemiBold.woff2" as="font">
  <link rel="preload" href="/assets/fonts/CascadiaMono-Regular-Sub.woff2" as="font">
  <link rel="preload" href="/assets/images/blur.webp" as="image">
  
  <script>document.documentElement.className = document.documentElement.className.replace("no-js", "js"), document.addEventListener("DOMContentLoaded", (() => { const e = document.cookie.split("; ").find((e => e.startsWith("INSECURE_SIGNED_IN=")))?.split("=")[1].toLowerCase(); if ("1" === e || "true" === e || "yes" === e) { document.documentElement.classList.add("signed-in"); const e = document.querySelector("header nav a.nav-btn"), t = document.querySelector("header nav a.sign-in"); e && (e.innerHTML = "Go to app", e.setAttribute("href", "/app/")), t && (t.innerHTML = "Sign out", t.setAttribute("href", "https://api.typst.app/v1/auth/logout")) } }))</script>
</head>

<body class="no-js docs has-outline">
  <div class="alert">
    <div class="alert-content">
      <span>⚠ <b>注意</b>  当サイトは、<a href="https://typst.app/docs/">Typst v0.12.0 公式ドキュメント</a>を、日本語コミュニティが非公式に翻訳したものです。誤訳・未訳・古い情報が含まれている可能性があるため、<a href="https://typst.app/docs/">公式ドキュメント</a> との併用を推奨します。このサイトの内容に誤りを発見された方は、<a href="https://github.com/typst-jp/typst-jp.github.io">GitHubリポジトリまでご報告を頂けましたら幸いです</a>。我々のコミュニティにご興味のある方は、ぜひ<a href="https://discord.gg/9xF7k4aAuH">非公式Discordサーバー「くみはんクラブ」</a>にご参加ください。</span>
      <br />
      <span>⚠ <b>Warning:</b>   This site provides an unofficial translation of the <a href="https://typst.app/docs/">Typst v0.12.0 documentation</a> by the Japanese Community. Please note that there may be some inaccuracies, untranslated sections or outdated information. We highly recommend referring to <a href="https://typst.app/docs/">the latest official documentation</a> as well. If you find any errors in the content, <a href="https://github.com/typst-jp/typst-jp.github.io">please let us know through our GitHub repository.</a> If you are interested in our community, feel free to join <a href="https://discord.gg/9xF7k4aAuH">our unofficial Discord server, “Kumihan Club.”</a></span>
    </div>
    <button id="closeAlertButton" class="close"><img alt="Close" src="/assets/icons/16-close-dark.svg"
          width="16" height="16"></button>
  </div>
  <header class="boring">
    <div><a href="/docs" class="logo-box"><svg width="91" height="35" viewBox="0 0 91 35" role="img"
          aria-labelledby="logo-label">
          <title id="logo-label">Typst</title>
          <use href="/assets/images/typst.svg#logo"></use>
        </svg><span>ドキュメント日本語版</span></a><button class="hamburger"><img alt="Open navigation"
          src="/assets/icons/16-hamburger-dark.svg" width="16" height="16"></button>
      <nav>
        <ul>
          <li class="social"><a href="https://x.com/mkpoli/status/1802227029447725538" title="関連ツイート"><svg width="16" height="16" role="img"
                aria-labelledby="svg-twitter-label">
                <title id="svg-twitter-label">Twitter</title>
                <use href="/assets/icons/social.svg#twitter"></use>
              </svg></a></li>
          <li class="social"><a href="https://discord.gg/9xF7k4aAuH" title="「くみはんクラブ」Discordサーバー"><svg width="16" height="16" role="img"
                aria-labelledby="svg-discord-label">
                <title id="svg-discord-label">Discord</title>
                <use href="/assets/icons/social.svg#discord"></use>
              </svg></a></li>
          <li class="social"><a href="https://github.com/typst-jp/typst-jp.github.io" title="本プロジェクトのGitHubレポジトリ"><svg width="16" height="16" role="img"
                aria-labelledby="svg-github-label">
                <title id="svg-github-label">GitHub</title>
                <use href="/assets/icons/social.svg#github"></use>
              </svg></a></li>
          <li class="secondary"><a href="https://typst.app/">Typst公式サイト</a></li>
          <li class="secondary"><a href="https://typst.app/docs/">Typst公式ドキュメント</a></li>
          <!-- <li class="secondary"><a href="/signin/" class="sign-in">Sign in</a></li>
          <li><a href="/signup" id="header-btn" class="nav-btn btn">Sign up</a></li> -->
        </ul>
      </nav>
    </div>
  </header>
  <div class="main-grid">
    <nav class="folding"><a href="/docs" class="title-row"><svg width="91" height="35" viewBox="0 0 91 35" role="img"
          aria-labelledby="logo-label-nav">
          <title id="logo-label-nav">Typst</title>
          <use href="/assets/images/typst.svg#logo"></use>
        </svg><span>ドキュメント日本語版</span></a>
      <button class="close"><img alt="Close" src="/assets/icons/16-close-dark.svg"
          width="16" height="16"></button>
      <div class="search"><img src="/assets/icons/16-search-gray.svg" alt="Search" width="16" height="16"><input
          type="search" placeholder="検索" id="docs-search"></div>
      <ul class="search-results hidden" id="search-results"></ul>
      <ul>
        
        
        <li>
          <a href="/docs/" >Typstについて</a>
          
        </li>
        
        
        <li>
          <a href="/docs/tutorial/" >チュートリアル</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/tutorial/writing-in-typst/" >Typstで執筆するには</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/formatting/" >書式を設定する</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/advanced-styling/" >高度なスタイリング</a>
              
            </li>
            
            
            <li>
              <a href="/docs/tutorial/making-a-template/" >テンプレートを作成する</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/reference/" >リファレンス</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li class="category">Language</li>
            
            <li>
              <a href="/docs/reference/syntax/" >構文</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/styling/" >スタイル設定</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/scripting/" >スクリプト記述</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/context/" >コンテキスト</a>
              
            </li>
            
            
            <li class="category">Library</li>
            
            <li>
              <a href="/docs/reference/foundations/" >基礎</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/foundations/arguments/" >Arguments</a></li>
                
                
                <li><a href="/docs/reference/foundations/array/" >Array</a></li>
                
                
                <li><a href="/docs/reference/foundations/assert/" >Assert</a></li>
                
                
                <li><a href="/docs/reference/foundations/auto/" >Auto</a></li>
                
                
                <li><a href="/docs/reference/foundations/bool/" >Boolean</a></li>
                
                
                <li><a href="/docs/reference/foundations/bytes/" >Bytes</a></li>
                
                
                <li><a href="/docs/reference/foundations/calc" >Calculation</a></li>
                
                
                <li><a href="/docs/reference/foundations/content/" >Content</a></li>
                
                
                <li><a href="/docs/reference/foundations/datetime/" >Datetime</a></li>
                
                
                <li><a href="/docs/reference/foundations/decimal/" >Decimal</a></li>
                
                
                <li><a href="/docs/reference/foundations/dictionary/" >Dictionary</a></li>
                
                
                <li><a href="/docs/reference/foundations/duration/" >Duration</a></li>
                
                
                <li><a href="/docs/reference/foundations/eval/" >Evaluate</a></li>
                
                
                <li><a href="/docs/reference/foundations/float/" >Float</a></li>
                
                
                <li><a href="/docs/reference/foundations/function/" >Function</a></li>
                
                
                <li><a href="/docs/reference/foundations/int/" >Integer</a></li>
                
                
                <li><a href="/docs/reference/foundations/label/" >Label</a></li>
                
                
                <li><a href="/docs/reference/foundations/module/" >Module</a></li>
                
                
                <li><a href="/docs/reference/foundations/none/" >None</a></li>
                
                
                <li><a href="/docs/reference/foundations/panic/" >Panic</a></li>
                
                
                <li><a href="/docs/reference/foundations/plugin/"  aria-current="page" >Plugin</a></li>
                
                
                <li><a href="/docs/reference/foundations/regex/" >Regex</a></li>
                
                
                <li><a href="/docs/reference/foundations/repr/" >Representation</a></li>
                
                
                <li><a href="/docs/reference/foundations/selector/" >Selector</a></li>
                
                
                <li><a href="/docs/reference/foundations/str/" >String</a></li>
                
                
                <li><a href="/docs/reference/foundations/symbol/" >Symbol</a></li>
                
                
                <li><a href="/docs/reference/foundations/sys" >System</a></li>
                
                
                <li><a href="/docs/reference/foundations/target/" >Target</a></li>
                
                
                <li><a href="/docs/reference/foundations/type/" >Type</a></li>
                
                
                <li><a href="/docs/reference/foundations/version/" >Version</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/model/" >モデル</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/model/bibliography/" >Bibliography</a></li>
                
                
                <li><a href="/docs/reference/model/list/" >Bullet List</a></li>
                
                
                <li><a href="/docs/reference/model/cite/" >Cite</a></li>
                
                
                <li><a href="/docs/reference/model/document/" >Document</a></li>
                
                
                <li><a href="/docs/reference/model/emph/" >Emphasis</a></li>
                
                
                <li><a href="/docs/reference/model/figure/" >Figure</a></li>
                
                
                <li><a href="/docs/reference/model/footnote/" >Footnote</a></li>
                
                
                <li><a href="/docs/reference/model/heading/" >Heading</a></li>
                
                
                <li><a href="/docs/reference/model/link/" >Link</a></li>
                
                
                <li><a href="/docs/reference/model/enum/" >Numbered List</a></li>
                
                
                <li><a href="/docs/reference/model/numbering/" >Numbering</a></li>
                
                
                <li><a href="/docs/reference/model/outline/" >Outline</a></li>
                
                
                <li><a href="/docs/reference/model/par/" >Paragraph</a></li>
                
                
                <li><a href="/docs/reference/model/parbreak/" >Paragraph Break</a></li>
                
                
                <li><a href="/docs/reference/model/quote/" >Quote</a></li>
                
                
                <li><a href="/docs/reference/model/ref/" >Reference</a></li>
                
                
                <li><a href="/docs/reference/model/strong/" >Strong Emphasis</a></li>
                
                
                <li><a href="/docs/reference/model/table/" >Table</a></li>
                
                
                <li><a href="/docs/reference/model/terms/" >Term List</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/text/" >文章</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/text/highlight/" >Highlight</a></li>
                
                
                <li><a href="/docs/reference/text/linebreak/" >Line Break</a></li>
                
                
                <li><a href="/docs/reference/text/lorem/" >Lorem</a></li>
                
                
                <li><a href="/docs/reference/text/lower/" >Lowercase</a></li>
                
                
                <li><a href="/docs/reference/text/overline/" >Overline</a></li>
                
                
                <li><a href="/docs/reference/text/raw/" >Raw Text / Code</a></li>
                
                
                <li><a href="/docs/reference/text/smallcaps/" >Small Capitals</a></li>
                
                
                <li><a href="/docs/reference/text/smartquote/" >Smartquote</a></li>
                
                
                <li><a href="/docs/reference/text/strike/" >Strikethrough</a></li>
                
                
                <li><a href="/docs/reference/text/sub/" >Subscript</a></li>
                
                
                <li><a href="/docs/reference/text/super/" >Superscript</a></li>
                
                
                <li><a href="/docs/reference/text/text/" >Text</a></li>
                
                
                <li><a href="/docs/reference/text/underline/" >Underline</a></li>
                
                
                <li><a href="/docs/reference/text/upper/" >Uppercase</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/math/" >数式</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/math/accent/" >Accent</a></li>
                
                
                <li><a href="/docs/reference/math/attach" >Attach</a></li>
                
                
                <li><a href="/docs/reference/math/binom/" >Binomial</a></li>
                
                
                <li><a href="/docs/reference/math/cancel/" >Cancel</a></li>
                
                
                <li><a href="/docs/reference/math/cases/" >Cases</a></li>
                
                
                <li><a href="/docs/reference/math/class/" >Class</a></li>
                
                
                <li><a href="/docs/reference/math/equation/" >Equation</a></li>
                
                
                <li><a href="/docs/reference/math/frac/" >Fraction</a></li>
                
                
                <li><a href="/docs/reference/math/lr" >Left/Right</a></li>
                
                
                <li><a href="/docs/reference/math/mat/" >Matrix</a></li>
                
                
                <li><a href="/docs/reference/math/primes/" >Primes</a></li>
                
                
                <li><a href="/docs/reference/math/roots" >Roots</a></li>
                
                
                <li><a href="/docs/reference/math/sizes" >Sizes</a></li>
                
                
                <li><a href="/docs/reference/math/stretch/" >Stretch</a></li>
                
                
                <li><a href="/docs/reference/math/styles" >Styles</a></li>
                
                
                <li><a href="/docs/reference/math/op/" >Text Operator</a></li>
                
                
                <li><a href="/docs/reference/math/underover" >Under/Over</a></li>
                
                
                <li><a href="/docs/reference/math/variants" >Variants</a></li>
                
                
                <li><a href="/docs/reference/math/vec/" >Vector</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/symbols/" >記号</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/symbols/sym/" >General</a></li>
                
                
                <li><a href="/docs/reference/symbols/emoji/" >Emoji</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/layout/" >レイアウト</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/layout/align/" >Align</a></li>
                
                
                <li><a href="/docs/reference/layout/alignment/" >Alignment</a></li>
                
                
                <li><a href="/docs/reference/layout/angle/" >Angle</a></li>
                
                
                <li><a href="/docs/reference/layout/block/" >Block</a></li>
                
                
                <li><a href="/docs/reference/layout/box/" >Box</a></li>
                
                
                <li><a href="/docs/reference/layout/colbreak/" >Column Break</a></li>
                
                
                <li><a href="/docs/reference/layout/columns/" >Columns</a></li>
                
                
                <li><a href="/docs/reference/layout/direction/" >Direction</a></li>
                
                
                <li><a href="/docs/reference/layout/fraction/" >Fraction</a></li>
                
                
                <li><a href="/docs/reference/layout/grid/" >Grid</a></li>
                
                
                <li><a href="/docs/reference/layout/hide/" >Hide</a></li>
                
                
                <li><a href="/docs/reference/layout/layout/" >Layout</a></li>
                
                
                <li><a href="/docs/reference/layout/length/" >Length</a></li>
                
                
                <li><a href="/docs/reference/layout/measure/" >Measure</a></li>
                
                
                <li><a href="/docs/reference/layout/move/" >Move</a></li>
                
                
                <li><a href="/docs/reference/layout/pad/" >Padding</a></li>
                
                
                <li><a href="/docs/reference/layout/page/" >Page</a></li>
                
                
                <li><a href="/docs/reference/layout/pagebreak/" >Page Break</a></li>
                
                
                <li><a href="/docs/reference/layout/place/" >Place</a></li>
                
                
                <li><a href="/docs/reference/layout/ratio/" >Ratio</a></li>
                
                
                <li><a href="/docs/reference/layout/relative/" >Relative Length</a></li>
                
                
                <li><a href="/docs/reference/layout/repeat/" >Repeat</a></li>
                
                
                <li><a href="/docs/reference/layout/rotate/" >Rotate</a></li>
                
                
                <li><a href="/docs/reference/layout/scale/" >Scale</a></li>
                
                
                <li><a href="/docs/reference/layout/skew/" >Skew</a></li>
                
                
                <li><a href="/docs/reference/layout/h/" >Spacing (H)</a></li>
                
                
                <li><a href="/docs/reference/layout/v/" >Spacing (V)</a></li>
                
                
                <li><a href="/docs/reference/layout/stack/" >Stack</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/visualize/" >視覚化</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/visualize/circle/" >Circle</a></li>
                
                
                <li><a href="/docs/reference/visualize/color/" >Color</a></li>
                
                
                <li><a href="/docs/reference/visualize/curve/" >Curve</a></li>
                
                
                <li><a href="/docs/reference/visualize/ellipse/" >Ellipse</a></li>
                
                
                <li><a href="/docs/reference/visualize/gradient/" >Gradient</a></li>
                
                
                <li><a href="/docs/reference/visualize/image/" >Image</a></li>
                
                
                <li><a href="/docs/reference/visualize/line/" >Line</a></li>
                
                
                <li><a href="/docs/reference/visualize/path/" >Path</a></li>
                
                
                <li><a href="/docs/reference/visualize/polygon/" >Polygon</a></li>
                
                
                <li><a href="/docs/reference/visualize/rect/" >Rectangle</a></li>
                
                
                <li><a href="/docs/reference/visualize/square/" >Square</a></li>
                
                
                <li><a href="/docs/reference/visualize/stroke/" >Stroke</a></li>
                
                
                <li><a href="/docs/reference/visualize/tiling/" >Tiling</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/introspection/" >内省</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/introspection/counter/" >Counter</a></li>
                
                
                <li><a href="/docs/reference/introspection/here/" >Here</a></li>
                
                
                <li><a href="/docs/reference/introspection/locate/" >Locate</a></li>
                
                
                <li><a href="/docs/reference/introspection/location/" >Location</a></li>
                
                
                <li><a href="/docs/reference/introspection/metadata/" >Metadata</a></li>
                
                
                <li><a href="/docs/reference/introspection/query/" >Query</a></li>
                
                
                <li><a href="/docs/reference/introspection/state/" >State</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/data-loading/" >データの読み込み</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/data-loading/cbor/" >CBOR</a></li>
                
                
                <li><a href="/docs/reference/data-loading/csv/" >CSV</a></li>
                
                
                <li><a href="/docs/reference/data-loading/json/" >JSON</a></li>
                
                
                <li><a href="/docs/reference/data-loading/read/" >Read</a></li>
                
                
                <li><a href="/docs/reference/data-loading/toml/" >TOML</a></li>
                
                
                <li><a href="/docs/reference/data-loading/xml/" >XML</a></li>
                
                
                <li><a href="/docs/reference/data-loading/yaml/" >YAML</a></li>
                
              </ul>
              
            </li>
            
            
            <li class="category">Export</li>
            
            <li>
              <a href="/docs/reference/pdf/" >PDF</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/pdf/embed/" >Embed</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/html/" >HTML</a>
              
              <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
              <ul>
                
                
                <li><a href="/docs/reference/html/elem/" >Elem</a></li>
                
                
                <li><a href="/docs/reference/html/frame/" >Frame</a></li>
                
              </ul>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/png/" >PNG</a>
              
            </li>
            
            
            <li>
              <a href="/docs/reference/svg/" >SVG</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/guides/" >ガイド</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/guides/guide-for-latex-users/" >Guide for LaTeX users</a>
              
            </li>
            
            
            <li>
              <a href="/docs/guides/page-setup-guide/" >Page setup guide</a>
              
            </li>
            
            
            <li>
              <a href="/docs/guides/table-guide/" >Table guide</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/changelog/" >変更履歴</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/changelog/0.13.0/" >0.13.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.12.0/" >0.12.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.11.1/" >0.11.1</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.11.0/" >0.11.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.10.0/" >0.10.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.9.0/" >0.9.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.8.0/" >0.8.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.7.0/" >0.7.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.6.0/" >0.6.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.5.0/" >0.5.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.4.0/" >0.4.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.3.0/" >0.3.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.2.0/" >0.2.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/0.1.0/" >0.1.0</a>
              
            </li>
            
            
            <li>
              <a href="/docs/changelog/earlier/" >Earlier</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/japanese/" >日本語組版情報</a>
          
          <button><img alt="Expand" src="/assets/icons/16-arrow-right.svg" width="16" height="16"></button>
          <ul>
            
            
            <li>
              <a href="/docs/japanese/templates/" >日本語テンプレート</a>
              
            </li>
            
            
            <li>
              <a href="/docs/japanese/packages/" >日本語向けパッケージ</a>
              
            </li>
            
            
            <li>
              <a href="/docs/japanese/articles/" >日本語記事</a>
              
            </li>
            
          </ul>
          
        </li>
        
        
        <li>
          <a href="/docs/glossary/" >用語集</a>
          
        </li>
        
      </ul>

    </nav>
    <main>
      <ul class="breadcrumbs" aria-label="Breadcrumbs">
        <li class="root"><a href="/docs/"><img src="/assets/icons/16-docs-dark.svg" alt="Docs" width="16"
              height="16"></a></li>

        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/">リファレンス</a></li>
        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/foundations/">基礎</a></li>
        
        <li aria-hidden="true"><img src="/assets/icons/16-arrow-right.svg" width="16" height="16" alt=""></li>
        <li><a href="/docs/reference/foundations/plugin/">Plugin</a></li>
        
      </ul>

      

<h1 id="summary"><code>plugin</code><small></small></h1>
<p>Loads a WebAssembly module.</p>
<p>The resulting <a href="/docs/reference/foundations/module/" title="module">module</a> will contain one Typst <a href="/docs/reference/foundations/function/" title="function">function</a> for each function
export of the loaded WebAssembly module.</p>
<p>Typst WebAssembly plugins need to follow a specific
<a href="/docs/reference/foundations/plugin/#protocol">protocol</a>. To run as a plugin, a program needs to be
compiled to a 32-bit shared WebAssembly library. Plugin functions may accept
multiple <a href="/docs/reference/foundations/bytes/">byte buffers</a> as arguments and return a single byte
buffer. They should typically be wrapped in idiomatic Typst functions that
perform the necessary conversions between native Typst types and bytes.</p>
<p>For security reasons, plugins run in isolation from your system. This means
that printing, reading files, or similar things are not supported.</p>
<h2 id="example">Example</h2>
<div class="previewed-code"><pre><code><span class="typ-key">#</span><span class="typ-key">let</span> myplugin <span class="typ-op">=</span> <span class="typ-func">plugin</span><span class="typ-punct">(</span><span class="typ-str">&quot;hello.wasm&quot;</span><span class="typ-punct">)</span>
<span class="typ-key">#</span><span class="typ-key">let</span> <span class="typ-func">concat</span><span class="typ-punct">(</span>a<span class="typ-punct">,</span> b<span class="typ-punct">)</span> <span class="typ-op">=</span> <span class="typ-func">str</span><span class="typ-punct">(</span>
  myplugin<span class="typ-punct">.</span><span class="typ-func">concatenate</span><span class="typ-punct">(</span>
    <span class="typ-func">bytes</span><span class="typ-punct">(</span>a<span class="typ-punct">)</span><span class="typ-punct">,</span>
    <span class="typ-func">bytes</span><span class="typ-punct">(</span>b<span class="typ-punct">)</span><span class="typ-punct">,</span>
  <span class="typ-punct">)</span>
<span class="typ-punct">)</span>

<span class="typ-func">#</span><span class="typ-func">concat</span><span class="typ-punct">(</span><span class="typ-str">&quot;hello&quot;</span><span class="typ-punct">,</span> <span class="typ-str">&quot;world&quot;</span><span class="typ-punct">)</span>
</code></pre><div class="preview"><img src="/assets/docs/adb0cb4385a108f0fa953ac5ab68fc90.png" alt="Preview" width="480" height="190"/></div></div>
<p>Since the plugin function returns a module, it can be used with import
syntax:</p>
<pre><code><span class="typ-key">#</span><span class="typ-key">import</span> <span class="typ-func">plugin</span><span class="typ-punct">(</span><span class="typ-str">&quot;hello.wasm&quot;</span><span class="typ-punct">)</span><span class="typ-punct">:</span> concatenate
</code></pre>
<h2 id="purity">Purity</h2>
<p>Plugin functions <strong>must be pure:</strong> A plugin function call most not have any
observable side effects on future plugin calls and given the same arguments,
it must always return the same value.</p>
<p>The reason for this is that Typst functions must be pure (which is quite
fundamental to the language design) and, since Typst function can call
plugin functions, this requirement is inherited. In particular, if a plugin
function is called twice with the same arguments, Typst might cache the
results and call your function only once. Moreover, Typst may run multiple
instances of your plugin in multiple threads, with no state shared between
them.</p>
<p>Typst does not enforce plugin function purity (for efficiency reasons), but
calling an impure function will lead to unpredictable and irreproducible
results and must be avoided.</p>
<p>That said, mutable operations <em>can be</em> useful for plugins that require
costly runtime initialization. Due to the purity requirement, such
initialization cannot be performed through a normal function call. Instead,
Typst exposes a <a href="/docs/reference/foundations/plugin/#definitions-transition">plugin transition API</a>, which executes
a function call and then creates a derived module with new functions which
will observe the side effects produced by the transition call. The original
plugin remains unaffected.</p>
<h2 id="plugins-and-packages">Plugins and Packages</h2>
<p>Any Typst code can make use of a plugin simply by including a WebAssembly
file and loading it. However, because the byte-based plugin interface is
quite low-level, plugins are typically exposed through a package containing
the plugin and idiomatic wrapper functions.</p>
<h2 id="wasi">WASI</h2>
<p>Many compilers will use the <a href="https://wasi.dev/">WASI ABI</a> by default or as
their only option (e.g. emscripten), which allows printing, reading files,
etc. This ABI will not directly work with Typst. You will either need to
compile to a different target or <a href="https://github.com/astrale-sharp/wasm-minimal-protocol/tree/master/crates/wasi-stub">stub all
functions</a>.</p>
<h2 id="protocol">Protocol</h2>
<p>To be used as a plugin, a WebAssembly module must conform to the following
protocol:</p>
<h3 id="exports">Exports</h3>
<p>A plugin module can export functions to make them callable from Typst. To
conform to the protocol, an exported function should:</p>
<ul>
<li>
<p>Take <code>n</code> 32-bit integer arguments <code>a_1</code>, <code>a_2</code>, ..., <code>a_n</code> (interpreted as
lengths, so <code>usize/size_t</code> may be preferable), and return one 32-bit
integer.</p>
</li>
<li>
<p>The function should first allocate a buffer <code>buf</code> of length <code>a_1 + a_2 + ... + a_n</code>, and then call
<code>wasm_minimal_protocol_write_args_to_buffer(buf.ptr)</code>.</p>
</li>
<li>
<p>The <code>a_1</code> first bytes of the buffer now constitute the first argument, the
<code>a_2</code> next bytes the second argument, and so on.</p>
</li>
<li>
<p>The function can now do its job with the arguments and produce an output
buffer. Before returning, it should call
<code>wasm_minimal_protocol_send_result_to_host</code> to send its result back to the
host.</p>
</li>
<li>
<p>To signal success, the function should return <code>0</code>.</p>
</li>
<li>
<p>To signal an error, the function should return <code>1</code>. The written buffer is
then interpreted as an UTF-8 encoded error message.</p>
</li>
</ul>
<h3 id="imports">Imports</h3>
<p>Plugin modules need to import two functions that are provided by the
runtime. (Types and functions are described using WAT syntax.)</p>
<ul>
<li>
<p><code>(import &quot;typst_env&quot; &quot;wasm_minimal_protocol_write_args_to_buffer&quot; (func (param i32)))</code></p>
<p>Writes the arguments for the current function into a plugin-allocated
buffer. When a plugin function is called, it <a href="#exports">receives the
lengths</a> of its input buffers as arguments. It should then
allocate a buffer whose capacity is at least the sum of these lengths. It
should then call this function with a <code>ptr</code> to the buffer to fill it with
the arguments, one after another.</p>
</li>
<li>
<p><code>(import &quot;typst_env&quot; &quot;wasm_minimal_protocol_send_result_to_host&quot; (func (param i32 i32)))</code></p>
<p>Sends the output of the current function to the host (Typst). The first
parameter shall be a pointer to a buffer (<code>ptr</code>), while the second is the
length of that buffer (<code>len</code>). The memory pointed at by <code>ptr</code> can be freed
immediately after this function returns. If the message should be
interpreted as an error message, it should be encoded as UTF-8.</p>
</li>
</ul>
<h2 id="resources">Resources</h2>
<p>For more resources, check out the <a href="https://github.com/astrale-sharp/wasm-minimal-protocol">wasm-minimal-protocol
repository</a>. It
contains:</p>
<ul>
<li>A list of example plugin implementations and a test runner for these
examples</li>
<li>Wrappers to help you write your plugin in Rust (Zig wrapper in
development)</li>
<li>A stubber for WASI</li>
</ul>
<h2 id="parameters">
  
<span aria-describedby="parameters-tooltip">引数</span>
<div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
    aria-labelledby="parameters-tooltip-qm-label">
    <title id="parameters-tooltip-qm-label">Parameters are the inputs to a function. They are specified in parentheses after the function name.</title>
    <use href="/assets/icons/12-tooltip.svg#icon"></use>
  </svg>
  <div role="tooltip" id="parameters-tooltip" tabindex="-1">Parameters are the inputs to a function. They are specified in parentheses after the function name.</div>
</div>

</h2>

<div class="code code-definition single-arg"><span
    class="typ-func">plugin</span>(<div class="arguments"><span
      class="overview-param"><a href="/docs/reference/foundations/str" class="pill pill-str">str</a><a href="/docs/reference/foundations/bytes" class="pill pill-obj">bytes</a> </span></div>) <!-- -->-&gt; <a href="/docs/reference/foundations/module" class="pill pill-obj">module</a></div>




<h4 id="plugin-plugin-parameters-source"><code>source</code>
  <div class="additional-info">
    <div>
      
        
        
          <a href="/docs/reference/foundations/str" class="pill pill-str">str</a>
        
      
        
        
          <a href="/docs/reference/foundations/bytes" class="pill pill-obj">bytes</a>
        
      
    </div>
    <small>Required</small><small><span
        aria-describedby="plugin-plugin-parameters-source-positional-tooltip">Positional</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="plugin-plugin-parameters-source-positional-tooltip-qm-label">
          <title id="plugin-plugin-parameters-source-positional-tooltip-qm-label">
            Positional parameters are specified in order, without names.</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="plugin-plugin-parameters-source-positional-tooltip"
          tabindex="-1">Positional parameters are specified in order, without names.</div>
      </div>
    </small>
  </div>
</h4>
<p>A <a href="/docs/reference/syntax/#paths">path</a> to a WebAssembly file or raw WebAssembly bytes.</p>








<h2 id="definitions">
  
<span aria-describedby="definitions-tooltip">定義</span>
<div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
    aria-labelledby="definitions-tooltip-qm-label">
    <title id="definitions-tooltip-qm-label">Functions and types and can have associated definitions. These are accessed by specifying the function or type, followed by a period, and then the definition's name.</title>
    <use href="/assets/icons/12-tooltip.svg#icon"></use>
  </svg>
  <div role="tooltip" id="definitions-tooltip" tabindex="-1">Functions and types and can have associated definitions. These are accessed by specifying the function or type, followed by a period, and then the definition's name.</div>
</div>

</h2>


  <h3 id="-transition" class="method-head"><span><code>transition</code></span></h3>
  
<p>Calls a plugin function that has side effects and returns a new module
with plugin functions that are guaranteed to have observed the results
of the mutable call.</p>
<p>Note that calling an impure function through a normal function call
(without use of the transition API) is forbidden and leads to
unpredictable behaviour. Read the <a href="/docs/reference/foundations/plugin/#purity">section on purity</a>
for more details.</p>
<p>In the example below, we load the plugin <code>hello-mut.wasm</code> which exports
two functions: The <code>get()</code> function retrieves a global array as a
string. The <code>add(value)</code> function adds a value to the global array.</p>
<p>We call <code>add</code> via the transition API. The call <code>mutated.get()</code> on the
derived module will observe the addition. Meanwhile the original module
remains untouched as demonstrated by the <code>base.get()</code> call.</p>
<p><em>Note:</em> Due to limitations in the internal WebAssembly implementation,
the transition API can only guarantee to reflect changes in the plugin's
memory, not in WebAssembly globals. If your plugin relies on changes to
globals being visible after transition, you might want to avoid use of
the transition API for now. We hope to lift this limitation in the
future.</p>

<div class="code code-definition ">plugin.<span
    class="typ-func">transition</span>(<div class="arguments"><span
      class="overview-param"><a href="/docs/reference/foundations/function" class="pill pill-fn">function</a>, </span><span
      class="overview-param"><a href="/docs/reference/foundations/bytes" class="pill pill-obj">bytes</a>, </span></div>) <!-- -->-&gt; <a href="/docs/reference/foundations/module" class="pill pill-obj">module</a></div>


  <details class="folding-example">
    <summary><img src="/assets/icons/16-arrow-right.svg" alt="" width="16" height="16">View example</summary>
    <div class="folding">
    <pre><code><span class="typ-key">#</span><span class="typ-key">let</span> base <span class="typ-op">=</span> <span class="typ-func">plugin</span><span class="typ-punct">(</span><span class="typ-str">&quot;hello-mut.wasm&quot;</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">assert</span><span class="typ-punct">.</span><span class="typ-func">eq</span><span class="typ-punct">(</span>base<span class="typ-punct">.</span><span class="typ-func">get</span><span class="typ-punct">(</span><span class="typ-punct">)</span><span class="typ-punct">,</span> <span class="typ-str">&quot;[]&quot;</span><span class="typ-punct">)</span>

<span class="typ-key">#</span><span class="typ-key">let</span> mutated <span class="typ-op">=</span> plugin<span class="typ-punct">.</span><span class="typ-func">transition</span><span class="typ-punct">(</span>base<span class="typ-punct">.</span>add<span class="typ-punct">,</span> <span class="typ-str">&quot;hello&quot;</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">assert</span><span class="typ-punct">.</span><span class="typ-func">eq</span><span class="typ-punct">(</span>base<span class="typ-punct">.</span><span class="typ-func">get</span><span class="typ-punct">(</span><span class="typ-punct">)</span><span class="typ-punct">,</span> <span class="typ-str">&quot;[]&quot;</span><span class="typ-punct">)</span>
<span class="typ-pol">#</span><span class="typ-pol">assert</span><span class="typ-punct">.</span><span class="typ-func">eq</span><span class="typ-punct">(</span>mutated<span class="typ-punct">.</span><span class="typ-func">get</span><span class="typ-punct">(</span><span class="typ-punct">)</span><span class="typ-punct">,</span> <span class="typ-str">&quot;[hello]&quot;</span><span class="typ-punct">)</span>
</code></pre>
    </div>
  </details>




<h4 id="definitions-transition-transition-parameters-func"><code>func</code>
  <div class="additional-info">
    <div>
      
        
        
          <a href="/docs/reference/foundations/function" class="pill pill-fn">function</a>
        
      
    </div>
    <small>Required</small><small><span
        aria-describedby="definitions-transition-transition-parameters-func-positional-tooltip">Positional</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="definitions-transition-transition-parameters-func-positional-tooltip-qm-label">
          <title id="definitions-transition-transition-parameters-func-positional-tooltip-qm-label">
            Positional parameters are specified in order, without names.</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="definitions-transition-transition-parameters-func-positional-tooltip"
          tabindex="-1">Positional parameters are specified in order, without names.</div>
      </div>
    </small>
  </div>
</h4>
<p>The plugin function to call.</p>




<h4 id="definitions-transition-transition-parameters-arguments"><code>arguments</code>
  <div class="additional-info">
    <div>
      
        
        
          <a href="/docs/reference/foundations/bytes" class="pill pill-obj">bytes</a>
        
      
    </div>
    <small>Required</small><small><span
        aria-describedby="definitions-transition-transition-parameters-arguments-positional-tooltip">Positional</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="definitions-transition-transition-parameters-arguments-positional-tooltip-qm-label">
          <title id="definitions-transition-transition-parameters-arguments-positional-tooltip-qm-label">
            Positional parameters are specified in order, without names.</title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="definitions-transition-transition-parameters-arguments-positional-tooltip"
          tabindex="-1">Positional parameters are specified in order, without names.</div>
      </div>
    </small><small><span
        aria-describedby="definitions-transition-transition-parameters-arguments-variadic-tooltip">Variadic</span>
      <div class="tooltip-context"><svg width="12" height="12" viewBox="0 0 12 12" tabindex="0" role="img"
          aria-labelledby="definitions-transition-transition-parameters-arguments-variadic-tooltip-qm-label">
          <title id="definitions-transition-transition-parameters-arguments-variadic-tooltip-qm-label">Variadic parameters can be specified multiple times.
          </title>
          <use href="/assets/icons/12-tooltip.svg#icon"></use>
        </svg>
        <div role="tooltip" id="definitions-transition-transition-parameters-arguments-variadic-tooltip"
          tabindex="-1">Variadic parameters can be specified multiple times.</div>
      </div>
    </small>
  </div>
</h4>
<p>The byte buffers to call the function with.</p>










      
      <div class="page-end-buttons"><a href="/docs/reference/foundations/panic/" class="previous"><img
            src="/assets/icons/16-arrow-right.svg" alt="←">
          <div><span class="page-title">Panic</span><span class="hint">前に戻る</span></div>
        </a><a href="/docs/reference/foundations/regex/" class="next"><img src="/assets/icons/16-arrow-right.svg" alt="→">
          <div><span class="page-title">Regex</span><span class="hint">次に進む</span></div>
        </a></div>
      
    </main>

    
    <nav id="page-overview"><strong>目次</strong>
      <ul>
        
        <li data-assoc="summary"><a href="#summary">概要</a>
          <ul></ul>
        </li>
        
        <li data-assoc="example"><a href="#example">Example</a>
          <ul></ul>
        </li>
        
        <li data-assoc="purity"><a href="#purity">Purity</a>
          <ul></ul>
        </li>
        
        <li data-assoc="plugins-and-packages"><a href="#plugins-and-packages">Plugins And Packages</a>
          <ul></ul>
        </li>
        
        <li data-assoc="wasi"><a href="#wasi">Wasi</a>
          <ul></ul>
        </li>
        
        <li data-assoc="protocol"><a href="#protocol">Protocol</a>
          <ul></ul>
        </li>
        
        <li data-assoc="resources"><a href="#resources">Resources</a>
          <ul></ul>
        </li>
        
        <li data-assoc="parameters"><a href="#parameters">引数</a>
          <ul></ul>
        </li>
        
        <li data-assoc="definitions"><a href="#definitions">定義</a>
          <ul></ul>
        </li>
        
      </ul>
    </nav>
    
  </div>
  <footer>
    <div>
      <ul>
        <li><a href="https://typst.app/">（公式）ホームページ</a></li>
        <li><a href="https://typst.app/docs/">（公式）ドキュメント（英語）</a></li>
        <li><a href="https://typst.app/universe/">（公式）拡張パッケージ・テンプレートの宇宙</a></li>
        <li><a href="https://typst.app/about/">（公式）Typstについて</a></li>
        <li><a href="https://typst.app/contact/">（公式）連絡先</a></li>
        <li><a href="https://typst.app/privacy/">（公式）プライバシーポリシー</a></li>
        <li><a href="https://typst.app/terms/">（公式）サービス規約</a></li>
        <li><a href="https://typst.app/legal/">（公式）免責事項</a></li>
      </ul>
    </div>
    <div>
      <ul>
        <li><a href="https://typst.app/tools/">（公式）ツール</a></li>
        <li><a href="https://typst.app/blog/">（公式）ブログ</a></li>
        <li><a href="https://twitter.com/typstapp/">（公式）Twitter</a></li>
        <li><a href="https://discord.gg/2uDybryKPe">（公式）Discord</a></li>
        <li><a rel="me" href="https://mastodon.social/@typst">（公式）Mastodon</a></li>
        <li><a href="https://www.linkedin.com/company/typst/">（公式）LinkedIn</a></li>
        <li><a href="https://instagram.com/typstapp/">（公式）Instagram</a></li>
        <li><a href="https://github.com/typst/">（公式）GitHub</a></li>
      </ul>
    </div>
    <div>
      <p>Made in Berlin</p>
      <p>Translated by <a href="https://github.com/typst-jp">Typst Japan Community</a></p>
    </div>
  </footer>
  <script src="/scripts/fuse.basic.min.js"></script>
  <script src="/scripts/docs.js?bust=20230913"></script>
  <script src="/scripts/analytics.js" defer></script>
</body>

</html>